@* @page
@model PortalArcomix.Pages.TempModel
@{
}



<!-- Card Negociação Fornecedor-->
<div class="card" id="NegociacaoFornecedor">
    <div class="card-body">
        <div class="row">
            <div class="col">
                <h4 style="color: #1878BB; margin-bottom: 20px;">Negociação Fornecedor</h4>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <hr>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2">
                <label for="idDTBaseVencimento">Data Base Vencimento</label>
                <div class="form-group mb-3">
                    <select class="form-control" id="idDTBaseVencimento" name="FornecedorNegociacao.DataBaseVencimento" asp-for="FornecedorNegociacao.DataBaseVencimento">
                        <option value="">Escolher...</option>
                        <option value="Emissão">Emissão</option>
                        <option value="Entrada">Entrada</option>
                        <option value="Saída">Saída</option>
                    </select>
                </div>
            </div>

            <!-- Additional Fields Start -->
            <div class="col-md-2">
                <label for="idPZPagamentoDias">Prazo Pagamento (dias)</label>
                <div class="form-group mb-3">
                    <input type="number" class="form-control" id="idPZPagamentoDias" name="FornecedorNegociacao.PrazoPagamentoDias" asp-for="FornecedorNegociacao.PrazoPagamentoDias" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idPZEntregaMedio">Prazo médio Entrega (dias)</label>
                <div class="form-group mb-3">
                    <input type="number" class="form-control" id="idPZEntregaMedio" name="FornecedorNegociacao.PrazoEntregaMedioDias" asp-for="FornecedorNegociacao.PrazoEntregaMedioDias" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idPZMedioAtraso">Prazo médio Atraso (dias)</label>
                <div class="form-group mb-3">
                    <input type="number" class="form-control" id="idPZMedioAtraso" name="FornecedorNegociacao.PrazoMedioAtrasoDias" asp-for="FornecedorNegociacao.PrazoMedioAtrasoDias" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idPZMedioVisita">Prazo médio visita (dias)</label>
                <div class="form-group mb-3">
                    <input type="number" class="form-control" id="idPZMedioVisita" name="FornecedorNegociacao.PrazoMedioVisitaDias" asp-for="FornecedorNegociacao.PrazoMedioVisitaDias" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idVerbaCadastro">Verba de cadastro (R$)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control currency-input" id="idVerbaCadastro" name="FornecedorNegociacao.VerbaCadastro" asp-for="FornecedorNegociacao.VerbaCadastro" />
                </div>
            </div>
            <!-- Additional Fields End -->
        </div>

        <!-- New Fields Start -->
        <div class="row">
            <div class="col-md-3">
                <label for="idMotivoVerbaZerada">Motivo da Verba Zerada</label>
                <div class="form-group mb-3">
                    <select class="form-control" id="idMotivoVerbaZerada" name="FornecedorNegociacao.MotivoVerbaZerada" asp-for="FornecedorNegociacao.MotivoVerbaZerada">
                        <option value="">Escolher...</option>
                        <option value="Não Paga Verba">Não Paga Verba</option>
                        <option value="Verba na Apuração ou Desconto">Verba na Apuração ou Desconto</option>
                    </select>
                </div>
            </div>
            <div class="col-md-5">
                <label for="idJustificativaSemVerba">Justificativa (Sem Verba)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idJustificativaSemVerba" name="FornecedorNegociacao.JustificativaSemVerba" asp-for="FornecedorNegociacao.JustificativaSemVerba" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idDivisaoVerba">Divisão</label>
                <div class="form-group mb-3">
                    <select class="form-control" id="idDivisaoVerba" name="FornecedorNegociacao.DivisaoVerba" asp-for="FornecedorNegociacao.DivisaoVerba">
                        <option value="">Escolher...</option>
                        <option value="Atacado">Atacado</option>
                        <option value="Varejo">Varejo</option>
                        <option value="Atacado / Varejo">Atacado / Varejo</option>
                    </select>
                </div>
            </div>
            <div class="col-md-2">
                <label for="idContratoFornecedor">Contrato</label>
                <div class="form-group mb-3">
                    <select class="form-control" id="idContratoFornecedor" name="FornecedorNegociacao.ContratoFornecedor" asp-for="FornecedorNegociacao.ContratoFornecedor">
                        <option value="">Escolher...</option>
                        <option value="Sim">Sim</option>
                        <option value="Sim, apenas Varejo">Sim, apenas Varejo</option>
                        <option value="Sim, apenas Atacado">Sim, apenas Atacado</option>
                        <option value="Sim, após o primeiro pedido">Sim, após o primeiro pedido</option>
                        <option value="Não">Não</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2">
                <label for="idApuracaoContrato">Apuração</label>
                <div class="form-group mb-3">
                    <select class="form-control" id="idApuracaoContrato" name="FornecedorNegociacao.ApuracaoContrato" asp-for="FornecedorNegociacao.ApuracaoContrato">
                        <option value="">Escolher...</option>
                        <option value="Líquido">Líquido</option>
                        <option value="Bruto">Bruto</option>
                    </select>
                </div>
            </div>
            <div class="col-md-2">
                <label for="idTipoContrato">Tipo de Contrato</label>
                <div class="form-group mb-3">
                    <select class="form-control" id="idTipoContrato" name="FornecedorNegociacao.TipoContrato" asp-for="FornecedorNegociacao.TipoContrato">
                        <option value="">Escolher...</option>
                        <option value="Desconto">Desconto</option>
                        <option value="Apuração">Apuração</option>
                    </select>
                </div>
            </div>
            <div class="col-md-2">
                <label for="idMotivoSemContrato">Motivo Sem Contrato</label>
                <div class="form-group mb-3">
                    <select class="form-control" id="idMotivoSemContrato" name="FornecedorNegociacao.MotivoSemContrato" asp-for="FornecedorNegociacao.MotivoSemContrato">
                        <option value="">Escolher...</option>
                        <option value="Rede Brasil">Rede Brasil</option>
                        <option value="Outros">Outros</option>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <label for="idJustificativaSemContrato">Justificativa (Sem Contrato)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idJustificativaSemContrato" name="FornecedorNegociacao.JustificativaSemContrato" asp-for="FornecedorNegociacao.JustificativaSemContrato" />
                </div>
            </div>
        </div>

        <!-- Percentuais do Contrato (Varejo) -->
        <div class="row">
            <div class="col-md-3" style="display: flex; align-items: center; justify-content: center; height: 70px;">
                <span style="font-weight: bold; color: #718288;">Percentuais do Contrato ( Varejo )</span>
            </div>
            <div class="col-md-1">
                <label for="idTotalContratoVarejo">Total(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control readonly" id="idTotalContratoVarejo" name="FornecedorNegociacao.TotalPercentualVarejo" asp-for="FornecedorNegociacao.TotalPercentualVarejo" readonly="true" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idLogisticoVarejo">Logístico(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idLogisticoVarejo" name="FornecedorNegociacao.LogisticoVarejo" asp-for="FornecedorNegociacao.LogisticoVarejo" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idDevolucaoVarejo">Avaria(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idDevolucaoVarejo" name="FornecedorNegociacao.DevolucaoVarejo" asp-for="FornecedorNegociacao.DevolucaoVarejo" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idAniversarioVarejo">Aniversário(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idAniversarioVarejo" name="FornecedorNegociacao.AniversarioVarejo" asp-for="FornecedorNegociacao.AniversarioVarejo" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idReinauguracaoVarejo">Reinauguração(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idReinauguracaoVarejo" name="FornecedorNegociacao.ReinauguracaoVarejo" asp-for="FornecedorNegociacao.ReinauguracaoVarejo" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idCadastroVarejo">Cadastro(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idCadastroVarejo" name="FornecedorNegociacao.CadastroVarejo" asp-for="FornecedorNegociacao.CadastroVarejo" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idFinanceiroVarejo">Financeiro(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idFinanceiroVarejo" name="FornecedorNegociacao.FinanceiroVarejo" asp-for="FornecedorNegociacao.FinanceiroVarejo" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idMarketingVarejo">Marketing(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idMarketingVarejo" name="FornecedorNegociacao.MarketingVarejo" asp-for="FornecedorNegociacao.MarketingVarejo" />
                </div>
            </div>
        </div>

        <!-- Percentuais do Contrato (Atacado) -->
        <div class="row">
            <div class="col-md-3" style="display: flex; align-items: center; justify-content: center; height: 70px;">
                <span style="font-weight: bold; color: #718288;">Percentuais do Contrato ( Atacado )</span>
            </div>
            <div class="col-md-1">
                <label for="idTotalContratoAtacado">Total(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control readonly" id="idTotalContratoAtacado" name="FornecedorNegociacao.TotalPercentualAtacado" asp-for="FornecedorNegociacao.TotalPercentualAtacado" readonly="true" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idLogisticoAtacado">Logístico(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idLogisticoAtacado" name="FornecedorNegociacao.LogisticoAtacado" asp-for="FornecedorNegociacao.LogisticoAtacado" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idDevolucaoAtacado">Avaria(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idDevolucaoAtacado" name="FornecedorNegociacao.DevolucaoAtacado" asp-for="FornecedorNegociacao.DevolucaoAtacado" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idAniversarioAtacado">Aniversário(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idAniversarioAtacado" name="FornecedorNegociacao.AniversarioAtacado" asp-for="FornecedorNegociacao.AniversarioAtacado" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idReinauguracaoAtacado">Reinauguração(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idReinauguracaoAtacado" name="FornecedorNegociacao.ReinauguracaoAtacado" asp-for="FornecedorNegociacao.ReinauguracaoAtacado" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idCadastroAtacado">Cadastro(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idCadastroAtacado" name="FornecedorNegociacao.CadastroAtacado" asp-for="FornecedorNegociacao.CadastroAtacado" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idFinanceiroAtacado">Financeiro(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idFinanceiroAtacado" name="FornecedorNegociacao.FinanceiroAtacado" asp-for="FornecedorNegociacao.FinanceiroAtacado" />
                </div>
            </div>
            <div class="col-md-1">
                <label for="idMarketingAtacado">Marketing(%)</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idMarketingAtacado" name="FornecedorNegociacao.MarketingAtacado" asp-for="FornecedorNegociacao.MarketingAtacado" />
                </div>
            </div>
        </div>
    </div>
</div>

<br />

<!-- Card Seguranca Alimentos-->
<div class="card" id="SegurancaAlimentos">
    <div class="card-body">
        <div class="row">
            <div class="col">
                <h4 style="color: #1878BB; margin-bottom: 20px;">Segurança de Alimentos</h4>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <hr>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2">
                <label for="idParecerSegurancaAlimentos">Parecer</label>
                <div class="form-group mb-3">
                    <select asp-for="SegurancaAlimentos.Parecer" class="form-control">
                        <option value="">Escolher...</option>
                        <option value="Aprovado">Aprovado</option>
                        <option value="Não Aprovado">Não Aprovado</option>
                        <option value="Pendência(s) Documentação">Pendência(s) Documentação</option>
                    </select>
                </div>
            </div>
            <div class="col-md-10">
                <label for="idDescricaoAvaliacao">Descrição da Avaliação</label>
                <div class="form-group mb-3">
                    <input asp-for="SegurancaAlimentos.DescricaoAvaliacao" class="form-control" />
                </div>
            </div>
            <hr />
        </div>

        <div class="row">
            <div class="col-md-2">
                <label for="idAtividadeEmpresaForn">Atividade da Empresa:</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idAtividadeEmpresaForn" name="SegurancaAlimentos.AtividadeEmpresa" asp-for="SegurancaAlimentos.AtividadeEmpresa" />
                </div>
            </div>
            <div class="col-md-3">
                <label for="idOrgaoFiscalizacaoForn">Orgão de Fiscalização</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idOrgaoFiscalizacaoForn" name="SegurancaAlimentos.OrgaoFiscalizacao" asp-for="SegurancaAlimentos.OrgaoFiscalizacao" />
                </div>
            </div>
            <div class="col-md-2">
                <label for="idNumRegistroForn">Nº Registro</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idNumRegistroForn" name="SegurancaAlimentos.NumeroRegistroOrgao" asp-for="SegurancaAlimentos.NumeroRegistroOrgao" />
                </div>
            </div>
            <div class="col-md-5">
                <label for="idResponsavelTecnico">Responsavel Técnico</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idResponsavelTecnico" name="SegurancaAlimentos.ResponsavelTecnico" asp-for="SegurancaAlimentos.ResponsavelTecnico" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
                <label for="idTecnicoForn">DDD</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idDDDTecnicoForn" name="SegurancaAlimentos.DDDTecnico" asp-for="SegurancaAlimentos.DDDTecnico" />
                </div>
            </div>
            <div class="col-md-3">
                <label for="idTelefoneTecnicoForn">Telefone</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idTelefoneTecnicoForn" name="SegurancaAlimentos.TelefoneTecnico" asp-for="SegurancaAlimentos.TelefoneTecnico" />
                </div>
            </div>
            <div class="col-md-4">
                <label for="idEmailTecnicoForn">Email</label>
                <div class="form-group mb-3">
                    <input type="text" class="form-control" id="idEmailTecnicoForn" name="SegurancaAlimentos.EmailTecnico" asp-for="SegurancaAlimentos.EmailTecnico" />
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col text-center">
                <p style="color: #ff0000; font-weight: bold;">** RESPONSÁVEL TÉCNICO DEVE RESPONDER À AVALIAÇÃO ABAIXO MARCANDO AS OPÇÕES QUE EXISTEM NA EMPRESA **</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.BPFImplantadoPraticado" />
                <label asp-for="SegurancaAlimentos.BPFImplantadoPraticado">Boas Práticas de Fabricação Implantado e Praticado</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.SistemaTratamentoResiduos" />
                <label asp-for="SegurancaAlimentos.SistemaTratamentoResiduos">Sistema de Tratamento dos Resíduos Gerados pelo Estabelecimento</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.ControleSaudeColaboradores" />
                <label asp-for="SegurancaAlimentos.ControleSaudeColaboradores">Controle de Saúde dos Colaboradores</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.CIPMIPImplementado" />
                <label asp-for="SegurancaAlimentos.CIPMIPImplementado">CIP/MIP implementado e monitorado</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.SistemaIdentificacaoRastreabilidade" />
                <label asp-for="SegurancaAlimentos.SistemaIdentificacaoRastreabilidade">Sistema de Identificação e Rastreabilidade do Processo</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.ProcedimentoPadraoFabricacao" />
                <label asp-for="SegurancaAlimentos.ProcedimentoPadraoFabricacao">Sistema de Procedimento Padrão de Fabricação e/ou Manipulação</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.ControleQualidadeImplementado" />
                <label asp-for="SegurancaAlimentos.ControleQualidadeImplementado">Controle de Qualidade implementado</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.ProcedimentoPadraoRecebimento" />
                <label asp-for="SegurancaAlimentos.ProcedimentoPadraoRecebimento">Sistema de Procedimento Padrão de Recebimento de Matéria Prima</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.SistemaTratamentoReclamacoes" />
                <label asp-for="SegurancaAlimentos.SistemaTratamentoReclamacoes">Sistema de Tratamento das Reclamações dos Clientes</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.TransporteProprio" />
                <label asp-for="SegurancaAlimentos.TransporteProprio">Transporte Próprio</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.FichaTecnicaProdutos" />
                <label asp-for="SegurancaAlimentos.FichaTecnicaProdutos">Ficha Técnica dos Produtos Produzidos</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.ControleProdutosNaoConforme" />
                <label asp-for="SegurancaAlimentos.ControleProdutosNaoConforme">Sistema de Controle de Produtos Não Conforme</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.ExigeHigienizacaoCIP" />
                <label asp-for="SegurancaAlimentos.ExigeHigienizacaoCIP">Exige higienização e CIP em dia do Transporte Terceirizado</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.RegistrosComprovacaoSistemas" />
                <label asp-for="SegurancaAlimentos.RegistrosComprovacaoSistemas">Registros de Comprovação desses sistemas?</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.LicencasPertinentes" />
                <label asp-for="SegurancaAlimentos.LicencasPertinentes">Todas as Licenças Pertinente ao Processo</label>
            </div>
            <div class="col-md-5">
                <input type="checkbox" asp-for="SegurancaAlimentos.EnviaAmostrasCliente" />
                <label asp-for="SegurancaAlimentos.EnviaAmostrasCliente">Envia Amostras para Cliente Quando Solicitado</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-6">
                <input type="checkbox" asp-for="SegurancaAlimentos.ControleAguaAbastecimento" />
                <label asp-for="SegurancaAlimentos.ControleAguaAbastecimento">Sistema de Controle da Água de Abastecimento e Residual no Estabelecimento</label>
            </div>
        </div>
    </div>
</div>
<br />

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const inputs = document.querySelectorAll('.validate-required');

            inputs.forEach(input => {
                input.addEventListener('blur', function () {
                    if (this.value.trim() === '') {
                        let label = this.closest('.form-group').querySelector('label');
                        if (!label) {
                            label = this.closest('.form-group').previousElementSibling;
                        }
                        if (label) {
                            alert(`O campo "${label.textContent}" não pode ficar em branco`);
                            // Remove the blur event temporarily to avoid infinite loop
                            this.removeEventListener('blur', arguments.callee);
                            this.focus();
                            // Re-add the blur event after refocus
                            setTimeout(() => {
                                this.addEventListener('blur', arguments.callee);
                            }, 0);
                        }
                    }
                });
            });

            var isSuccessful = document.getElementById('successIndicator').getAttribute('data-success');
            if (isSuccessful === 'True') {
                alert("Cadastro atualizado com sucesso");
            }
        });

        // Function to fetch address from ViaCEP
        function fetchAddress() {
            const cep = document.getElementById('CEP').value.replace(/\D/g, '');
            if (cep.length === 8) {
                const url = `https://viacep.com.br/ws/${cep}/json/`;

                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        if (data.erro) {
                            console.error('CEP não encontrado.');
                            return;
                        }
                        document.getElementById('Logradouro').value = data.logradouro;
                        document.getElementById('Bairro').value = data.bairro;
                        document.getElementById('Cidade').value = data.localidade;
                        document.getElementById('UF').value = data.uf;
                    })
                    .catch(error => console.error('Erro ao buscar o CEP:', error));
            }
        }

    </script>
} *@